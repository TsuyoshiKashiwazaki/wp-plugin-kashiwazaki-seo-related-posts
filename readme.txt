=== Kashiwazaki SEO Related Posts ===
Contributors: tsuyoshikashiwazaki
Tags: related posts, ai, seo, openai, gpt, similarity, cache, analytics
Requires at least: 5.0
Tested up to: 6.7
Requires PHP: 7.4
Stable tag: 1.0.0
License: GPLv2 or later
License URI: https://www.gnu.org/licenses/gpl-2.0.html

AI分析・多階層設定・詳細統計で関連記事を最適表示するSEOプラグイン

== Description ==

**Kashiwazaki SEO Related Posts**は、OpenAI GPTによるAI分析と高度な類似度計算を組み合わせた、プロフェッショナル向け関連記事表示プラグインです。3階層の設定システム（共通設定・投稿タイプ別設定・個別記事設定）と詳細なAPI統計により、大規模サイトでも効率的な運用が可能です。

**主な機能:**

* **AI分析**: OpenAI GPT-4o-mini/4o/4-turboによる高精度関連記事分析
* **3階層設定システム**: 共通設定・投稿タイプ別設定・個別記事設定で柔軟な制御
* **詳細API統計**: 成功/失敗の回数・成功率・30日間推移グラフで完全監視
* **智能キャッシュ**: 投稿タイプ別・記事別のキャッシュ管理で高速表示
* **一括操作**: 投稿タイプ単位での設定リセット・有効化・キャッシュクリア
* **3種類のテンプレート**: リスト・グリッド・スライダー
* **6色のカラーテーマ**: ブルー・オレンジ・グリーン・パープル・レッド・ホワイト
* **多彩な表示方法**: ショートコード・ウィジェット・自動挿入

**3階層設定システム:**

* **共通設定**: サイト全体のデフォルト値を設定
* **投稿タイプ別設定**: 投稿・固定ページ等タイプごとにカスタマイズ
* **個別記事設定**: 各記事で詳細な設定が可能（8項目）

**管理機能:**

* **API統計ダッシュボード**: 成功/失敗率・期間別集計・30日間グラフ
* **キャッシュ管理**: 投稿タイプ別・全体のキャッシュクリア機能
* **一括操作**: 同一投稿タイプの全記事を一括設定・有効化
* **投稿タイプ一覧**: キャッシュ数/記事数・設定状態を一目で確認
* **セキュリティ**: APIキーのマスク表示と表示切り替え機能

**🔍 分析要素:**

* **📂 カテゴリ**: 記事カテゴリの一致度分析
* **🏷️ タグ**: 記事タグの関連性計算
* **📝 タイトル**: タイトルキーワードの類似度
* **📄 抜粋**: 本文内容の意味的類似性
* **🌐 URLパス**: ディレクトリ構造の関連度
* **📅 投稿日**: 時期的関連性の評価
* **🤖 AI総合判定**: AIによる包括的関連性分析

**🎯 表示方法:**

* **ショートコード**: `[kashiwazaki_related_posts]` - 任意の場所に配置
* **ウィジェット**: サイドバー・フッターに関連記事ブロック
* **自動挿入**: 記事の前後に自動表示（投稿タイプ別設定可能）

== Installation ==

1. プラグインファイルを `/wp-content/plugins/kashiwazaki-seo-related-posts/` ディレクトリにアップロード
2. WordPress管理画面の「プラグイン」で有効化
3. プラグイン一覧の「⚙️ 基本設定」または管理メニューから設定画面へ
4. 必要に応じてAPIキーを設定（OpenRouter/OpenAI GPT）
5. カラーテーマ・表示形式・自動挿入設定を調整

== Frequently Asked Questions ==

= 3階層設定システムとは何ですか？ =

効率的な運用のための階層的設定構造です：
1. **共通設定**: サイト全体のデフォルト値
2. **投稿タイプ別設定**: 投稿・固定ページ等のタイプごとの設定
3. **個別記事設定**: 各記事で上書き可能な詳細設定

優先順位: 個別記事 > 投稿タイプ別 > 共通設定

= API統計機能で何がわかりますか？ =

API使用状況を完全に可視化できます：
* **期間別統計**: 24時間/1週間/1ヶ月/3ヶ月/1年/すべて
* **成功/失敗**: 各期間の成功数・失敗数・成功率
* **30日間グラフ**: 日別の成功/失敗推移を視覚的に確認
* **コスト管理**: API使用量を把握して予算管理

= スライダー表示の設定方法は？ =

基本設定の「📱 スライダー表示数」で以下を個別設定できます：
* **PC**: 1024px以上（1-8枚）
* **タブレット**: 768-1023px（1-6枚）
* **スマホ**: 767px以下（1-3枚）

= キャッシュ機能について教えてください =

投稿タイプ別・記事別で柔軟にキャッシュ管理できます：
* **有効期限**: 1-8760時間（365日）まで設定可能
* **投稿タイプ別クリア**: 特定の投稿タイプのみクリア
* **全体クリア**: すべてのキャッシュを一括削除
* **キャッシュ状況**: 投稿タイプ一覧でキャッシュ数/記事数を確認

= 個別記事での設定項目は？ =

編集画面のメタボックスで記事ごとに8項目を設定可能：
* 表示ON/OFF
* 最大表示記事数
* 表示形式（リスト/グリッド/スライダー）
* 挿入位置（記事の前/後/最初の段落の後）
* 対象投稿タイプ
* カテゴリフィルタ
* カラーテーマ
* 見出しテキスト・見出しタグ

= 一括操作機能とは？ =

投稿タイプ単位での効率的な管理が可能：
* **一括有効化**: 投稿タイプの全記事で関連記事を有効化
* **一括リセット**: 投稿タイプの全記事を現在のデフォルト値に戻す
* **キャッシュクリア**: 投稿タイプ別または全体のキャッシュ削除

= どのテンプレートを選ぶべきですか？ =

用途に応じて選択してください：
* **リスト**: 標準的な縦並び表示
* **グリッド**: カード状の格子表示（2-3列）
* **スライダー**: 横スクロール表示（レスポンシブ対応）

= ショートコードのパラメータは？ =

豊富なカスタマイズオプション：
* `max_posts`: 表示記事数（1-20）
* `template`: テンプレート種類（list/grid/slider）
* `use_ai`: AI分析使用（true/false/auto）
* `post_types`: 対象投稿タイプ（カンマ区切り）
* `filter_categories`: カテゴリフィルタ（IDをカンマ区切り）
* `search_methods`: 検索方法（カンマ区切り）
* `title`: セクションタイトル
* `exclude`: 除外記事ID（カンマ区切り）

例: `[kashiwazaki_related_posts max_posts="5" template="grid" filter_categories="1,2,3"]`

= カラーテーマの反映方法は？ =

基本設定で選択したカラーテーマは全ての表示形式に自動適用されます：
* **6色対応**: ブルー・オレンジ・グリーン・パープル・レッド・ホワイト
* **リアルタイム反映**: 設定変更後すぐに表示に反映
* **統一デザイン**: 全テンプレートで一貫したカラーリング

== Screenshots ==

1. プラグイン一覧からの直接アクセス - 設定・APIテスト・メインページへのクイックリンク
2. メイン管理画面 - API設定状況とプラグイン概要
3. APIキーテスト画面 - OpenRouter/OpenAI GPT切り替えとテスト機能
4. 基本設定画面 - カラーテーマ・スライダー・キャッシュ設定
5. プラグイン設定状況（アコーディオン） - 有効化記事一覧表示
6. 記事編集画面メタボックス - 個別記事設定とプレビュー
7. リストテンプレート表示例 - 標準的な縦並びレイアウト
8. グリッドテンプレート表示例 - カード状格子レイアウト
9. スライダーテンプレート表示例 - レスポンシブ横スクロール
10. カラーテーマ比較 - 6色のテーマ表示例

== Changelog ==

= 1.0.0 =
**初回リリース - エンタープライズ級関連記事管理システム**

**3階層設定システム:**
* 共通設定・投稿タイプ別設定・個別記事設定の階層的管理
* 優先順位に基づく柔軟な設定継承
* 投稿タイプ一覧でキャッシュ数/記事数を可視化

**AI分析機能:**
* OpenAI GPT-4o-mini/4o/4-turbo対応
* API統計ダッシュボード（成功/失敗率・30日間グラフ）
* APIキーのマスク表示とセキュリティ強化

**一括操作機能:**
* 投稿タイプ別の一括有効化
* 投稿タイプ別の一括デフォルト値リセット
* 投稿タイプ別・全体のキャッシュクリア

**表示機能:**
* 3種類のテンプレート（リスト・グリッド・スライダー）
* 6色のカラーテーマ
* レスポンシブスライダー（デバイス別設定）

**詳細設定（個別記事で8項目）:**
* 表示ON/OFF・最大表示数・表示形式・挿入位置
* 対象投稿タイプ・カテゴリフィルタ
* カラーテーマ・見出しテキスト・見出しタグ

**キャッシュ管理:**
* 最大8760時間（365日）の有効期限設定
* 投稿タイプ別キャッシュクリア
* キャッシュ状況の可視化

== Upgrade Notice ==

= 1.0.0 =
初回リリース。3階層設定・API統計・一括操作・詳細キャッシュ管理で大規模サイトの関連記事を効率的に運用。

== Advanced Usage ==

**ショートコード例:**

基本使用:
```
[kashiwazaki_related_posts]
```

カスタマイズ例:
```
[kashiwazaki_related_posts max_posts="5" template="grid" filter_categories="1,2,3"]
```

特定投稿タイプと検索方法:
```
[kashiwazaki_related_posts post_types="post,page" search_methods="tags,categories" max_posts="6"]
```

**🎨 カラーテーマ指定:**
基本設定で選択したテーマが自動適用されますが、CSS変数でカスタマイズも可能：
```css
.kashiwazaki-related-posts {
    --kashiwazaki-primary-color: #custom-color;
    --kashiwazaki-hover-color: #custom-hover-color;
}
```

**📱 スライダーレスポンシブ設定:**
基本設定画面で以下を個別設定：
* PC（1024px以上）: 1-8枚
* タブレット（768-1023px）: 1-6枚
* スマホ（767px以下）: 1-3枚

**パフォーマンス最適化:**
* キャッシュ有効期限: 24-168時間推奨（更新頻度に応じて調整）
* AI候補数追加: 20件推奨（品質と速度のバランス）
* 投稿タイプ一覧でキャッシュ率を監視

**運用のベストプラクティス:**
1. **共通設定**: サイト全体の基本方針を設定
2. **投稿タイプ別設定**: 投稿・固定ページ等で異なる設定が必要な場合のみ使用
3. **個別記事設定**: 特別な扱いが必要な記事のみ設定
4. **API統計**: 定期的に確認してコストを管理
5. **キャッシュ**: 投稿タイプ一覧でキャッシュ率を確認し、低い場合は有効期限を延長

**🔍 技術情報:**
* 作者: 柏崎剛
* 公式サイト: https://tsuyoshikashiwazaki.jp/
* SEO最適化研究に基づく設計
* WordPress標準に完全準拠
* 多言語対応準備済み
